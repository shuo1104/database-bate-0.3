/**
 * Dark Theme for Element Plus and custom styles
 */
@forward 'element-plus/theme-chalk/src/dark/var.scss' with (
  $bg-color: (
    '': #141414,
    'page': #141414, // 页面背景
    'overlay': #1d1d1d, // 弹窗、抽屉等浮层背景
  ),
  $colors: (
    'primary': (
      'base': #409eff,
    ),
  ),
  $text-color: (
    'primary': #e5eaf3,
    'regular': #cfd3dc,
    'secondary': #a3a6ad,
    'placeholder': #8d9095,
    'disabled': #6c6e72,
  ),
  $border-color: (
    '': #303030,
    'light': #2A2A2A,
    'lighter': #252525,
    'extra-light': #1F1F1F,
    'dark': #353535,
    'darker': #3A3A3A,
  )
);

// 自定义组件的暗黑模式覆盖
html.dark {
  // 全局背景色
  background-color: #141414 !important;
  transition: background-color 0.3s ease;
  
  body {
    background-color: #141414 !important;
    transition: background-color 0.3s ease;
  }
  
  #app {
    background-color: #141414 !important;
    transition: background-color 0.3s ease;
  }

  // 统一的页面容器，在暗黑模式下变成深色
  .app-container,
  .main-container,
  .content-container,
  .sidebar-container,
  .app-wrapper,
  .page-container,
  .navbar-container,
  .tags-view-container {
    background-color: #141414 !important;
    transition: background-color 0.3s ease;
  }
  
  // Element Plus 组件
  .el-table,
  .el-dialog,
  .el-select-dropdown,
  .el-dropdown-menu,
  .el-pagination,
  .el-form-item,
  .el-descriptions,
  .el-empty,
  .el-footer,
  footer {
    background-color: #141414 !important;
  }

  // 侧边栏样式 (新版 modern-sidebar)
  .modern-sidebar {
    background: #1d1d1d !important;
    border-right: 1px solid #303030 !important;
    
    // Logo 区域
    .sidebar-logo {
      border-bottom: 1px solid #303030 !important;
      
      .logo-text {
        .logo-title {
          color: #e5eaf3 !important;
        }
        
        .logo-subtitle {
          color: #8d9095 !important;
        }
      }
    }
    
    // 菜单项
    .menu-item {
      color: #cfd3dc !important;
      
      &:hover {
        background: #2a2a2a !important;
        color: #409eff !important;
      }
      
      &.active {
        background: #2a2a2a !important;
        color: #409eff !important;
        
        &::before {
          background: #409eff !important;
        }
      }
    }
    
    // 子菜单
    .submenu-item {
      color: #8d9095 !important;
      
      &:hover {
        background: #2a2a2a !important;
        color: #cfd3dc !important;
      }
      
      &.active {
        background: #2a2a2a !important;
        color: #409eff !important;
      }
    }
    
    // 滚动条
    &::-webkit-scrollbar-thumb {
      background: #303030 !important;
      
      &:hover {
        background: #383838 !important;
      }
    }
  }

  // 侧边栏样式 (旧版 sidebar-container，保留兼容)
  .sidebar-container {
    background-color: #1d1d1d !important;
    border-right: 1px solid #303030;
    
    .el-menu {
      background-color: #1d1d1d !important;
      border-right: none;
      
      .el-menu-item,
      .el-sub-menu__title {
        color: #cfd3dc;
        
        &:hover {
          background-color: #2a2a2a !important;
          color: #409eff;
        }
        
        &.is-active {
          background-color: #409eff !important;
          color: #ffffff;
        }
      }
      
      .el-sub-menu .el-menu {
        background-color: #1a1a1a !important;
      }
    }
  }

  // 导航栏样式
  .navbar-container {
    background-color: #1d1d1d !important;
    border-bottom: 1px solid #303030;
    
    .navbar {
      background-color: #1d1d1d !important;
      
      .navbar-left {
        .page-title {
          color: #e5eaf3;
        }
      }
      
      .navbar-right {
        .el-button {
          background-color: #2c2c2c;
          border-color: #303030;
          color: #cfd3dc;
          
          &:hover {
            background-color: #383838;
            border-color: #409eff;
            color: #409eff;
          }
        }
        
        .el-dropdown {
          .el-dropdown-link {
            color: #cfd3dc;
            
            &:hover {
              color: #409eff;
            }
          }
        }
      }
    }
  }

  // 下拉菜单样式
  .el-dropdown-menu {
    background-color: #1d1d1d !important;
    border: 1px solid #303030 !important;
    
    .el-dropdown-menu__item {
      color: #cfd3dc;
      
      &:hover {
        background-color: #2a2a2a !important;
        color: #409eff;
      }
    }
  }

  // 为卡片设置一个不同的灰色背景
  .el-card {
    background-color: #1d1d1d !important;
    
    // 卡片标题
    .el-card__header {
      background-color: #1d1d1d;
      border-bottom: 1px solid #303030;
      color: #e5eaf3;
    }
  }

  // 统计卡片样式增强
  .stat-card {
    border: 1px solid #303030 !important;
    
    &:hover {
      box-shadow: 0 12px 24px rgba(64, 158, 255, 0.3) !important;
      border-color: #409eff !important;
    }
    
    .stat-content,
    .stat-content-center {
      .stat-label {
        color: #8d9095 !important;
      }
      
      .stat-value {
        color: #e5eaf3 !important;
        font-weight: 600;
      }
    }
    
    .card-footer {
      color: #8d9095 !important;
      border-top-color: #303030 !important;
    }
    
    &:hover {
      .stat-content-center {
        .stat-value {
          color: #409eff !important;
        }
      }
      
      .card-footer {
        color: #409eff !important;
      }
    }
  }

  // 表格相关样式
  .el-table {
    background-color: #1d1d1d !important;
    
    th.el-table__cell {
      background-color: #252525 !important;
      color: #e5eaf3 !important; // 表头使用更亮的颜色
      font-weight: 600;
    }
    
    td.el-table__cell {
      background-color: #1d1d1d !important;
      color: #cfd3dc !important;
    }
    
    tr {
      background-color: #1d1d1d !important;
      
      &:hover > td {
        background-color: #2a2a2a !important;
      }
    }
    
    .el-table__body tr.hover-row > td {
      background-color: #2a2a2a !important;
    }
  }
  
  // 表格斑马纹
  .el-table--striped .el-table__body tr.el-table__row--striped td {
    background-color: #232323 !important;
  }
  
  // 表格空状态
  .el-table__empty-block {
    background-color: #1d1d1d !important;
    color: #8d9095;
  }

  // Descriptions 描述列表样式
  .el-descriptions {
    background-color: #1d1d1d !important;
    
    .el-descriptions__header {
      background-color: #1d1d1d !important;
      
      .el-descriptions__title {
        color: #e5eaf3 !important;
        font-weight: 600;
      }
    }
    
    .el-descriptions__body {
      background-color: #1d1d1d !important;
    }
    
    .el-descriptions__table {
      background-color: #1d1d1d !important;
    }
    
    .el-descriptions__cell {
      background-color: #1d1d1d !important;
      color: #cfd3dc !important;
      border-color: #303030 !important;
    }
    
    .el-descriptions__label {
      background-color: #252525 !important;
      color: #e5eaf3 !important; // 标签使用更亮的颜色
      font-weight: 500;
    }
    
    .el-descriptions__content {
      background-color: #1d1d1d !important;
      color: #cfd3dc !important;
    }
  }

  // 分页器样式
  .el-pagination {
    background-color: transparent !important;
    
    .el-pager li {
      background-color: #2c2c2c !important;
      color: #cfd3dc;
      
      &:hover {
        color: #409eff;
      }
      
      &.is-active {
        background-color: #409eff !important;
        color: #ffffff;
      }
    }
    
    button {
      background-color: #2c2c2c !important;
      color: #cfd3dc;
      
      &:hover {
        color: #409eff;
      }
      
      &:disabled {
        background-color: #1d1d1d !important;
        color: #6c6e72;
      }
    }
    
    .el-select .el-input__wrapper {
      background-color: #2c2c2c !important;
    }
  }

  // 表单和搜索区域
  .el-form {
    background-color: transparent !important;
  }

  .search-form,
  .filter-container,
  .toolbar,
  .page-header {
    background-color: transparent !important;
  }

  // 对话框样式
  .el-dialog {
    background-color: #1d1d1d !important;
    
    .el-dialog__header {
      background-color: #1d1d1d;
      border-bottom: 1px solid #303030;
      
      .el-dialog__title {
        color: #e5eaf3;
      }
    }
    
    .el-dialog__body {
      background-color: #1d1d1d;
      color: #cfd3dc;
    }
    
    .el-dialog__footer {
      background-color: #1d1d1d;
      border-top: 1px solid #303030;
    }
  }

  // 输入框和选择器样式
  .el-input__wrapper {
    background-color: #2c2c2c !important;
    box-shadow: none !important;
    border: 1px solid #303030 !important;
    
    .el-input__inner {
      color: #cfd3dc;
      
      &::placeholder {
        color: #8d9095;
      }
    }
  }

  .el-textarea__inner {
    background-color: #2c2c2c !important;
    border: 1px solid #303030 !important;
    color: #cfd3dc;
    
    &::placeholder {
      color: #8d9095;
    }
  }

  .el-select-dropdown {
    background-color: #1d1d1d !important;
    border: 1px solid #303030 !important;
    
    .el-select-dropdown__item {
      color: #cfd3dc;
      
      &:hover {
        background-color: #2a2a2a;
      }
      
      &.is-selected {
        background-color: #409eff;
        color: #ffffff;
      }
    }
  }

  .el-date-picker {
    background-color: #1d1d1d !important;
    border: 1px solid #303030 !important;
    
    .el-date-picker__header {
      color: #cfd3dc;
    }
    
    .el-date-table td {
      color: #cfd3dc;
      
      &.today span {
        color: #409eff;
      }
      
      &.current:not(.disabled) span {
        background-color: #409eff;
        color: #ffffff;
      }
    }
  }

  // 移除边框和阴影的样式在暗黑模式下也需要生效
  .el-card,
  .el-table {
    box-shadow: none !important;
    border-color: #303030 !important;
  }
  
  th.el-table__cell,
  td.el-table__cell {
    border-color: #252525 !important; // 使用更浅的边框色
  }

  // 项目详情页面样式
  .project-detail-container {
    .composition-summary {
      background-color: #2a2a2a !important;
    }
  }

  // 标签栏样式
  .tags-bar {
    background: #1d1d1d !important;
    border-bottom: 1px solid #303030;
  }

  .tag-item {
    background: #2c2c2c;
    color: #cfd3dc;

    &:hover {
      background: #383838;
      color: #409eff;
    }

    &.active {
      background: #409eff;
      color: #ffffff; // 激活状态下文字为白色
    }
    
    .tag-close {
      color: #909399;
      
      &:hover {
        background: rgba(255, 255, 255, 0.15);
        color: #fff;
      }
    }
  }

  .tags-actions {
    .action-icon {
      background: #2c2c2c;
      color: #cfd3dc;
      
      &:hover {
        background: #383838;
        color: #409eff;
      }
    }
  }

  // 登录页面暗黑模式
  .login-container {
    background: #141414 !important;
    
    .bg-decoration .circle {
      background: linear-gradient(135deg, rgba(64, 158, 255, 0.08) 0%, rgba(102, 126, 234, 0.08) 100%);
    }
  }

  .login-card {
    background: rgba(29, 29, 29, 0.95) !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6) !important;
  }

  .login-header {
    .system-title {
      .company-name {
        // 在暗黑模式下使用更亮的渐变
        background: linear-gradient(135deg, #7c90f5 0%, #9d7bc0 100%) !important;
        -webkit-background-clip: text !important;
        -webkit-text-fill-color: transparent !important;
        background-clip: text !important;
      }
      
      .product-name {
        color: #cfd3dc !important;
      }
    }

    .system-subtitle {
      color: #a3a6ad !important;
    }
  }

  .login-footer {
    border-top-color: #303030 !important;

    .copyright {
      color: #8d9095 !important;
    }
  }
}
